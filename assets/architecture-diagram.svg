<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .layer-box { fill: #f8f9fa; stroke: #343a40; stroke-width: 2; }
      .ui-layer { fill: #e3f2fd; }
      .domain-layer { fill: #f3e5f5; }
      .data-layer { fill: #e8f5e8; }
      .external-layer { fill: #fff3e0; }
      .text-title { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #333; }
      .text-component { font-family: Arial, sans-serif; font-size: 11px; fill: #555; }
      .text-layer { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #333; }
      .arrow { stroke: #666; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .di-box { fill: #ffeaa7; stroke: #636e72; stroke-width: 2; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="800" height="600" fill="#ffffff"/>

  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" class="text-layer" font-size="20">Bazaar App - Clean Architecture</text>

  <!-- UI Layer -->
  <rect x="50" y="60" width="700" height="120" class="layer-box ui-layer"/>
  <text x="60" y="80" class="text-layer">UI Layer (Presentation)</text>

  <!-- Compose Screens -->
  <rect x="70" y="90" width="130" height="80" class="layer-box" fill="#bbdefb"/>
  <text x="135" y="105" text-anchor="middle" class="text-title">Compose Screens</text>
  <text x="75" y="120" class="text-component">• ProductListScreen</text>
  <text x="75" y="135" class="text-component">• AuthScreen</text>
  <text x="75" y="150" class="text-component">• CreateProductScreen</text>
  <text x="75" y="165" class="text-component">• ProductDetailScreen</text>

  <!-- ViewModels -->
  <rect x="220" y="90" width="130" height="80" class="layer-box" fill="#bbdefb"/>
  <text x="285" y="105" text-anchor="middle" class="text-title">ViewModels</text>
  <text x="225" y="120" class="text-component">• ProductListViewModel</text>
  <text x="225" y="135" class="text-component">• AuthViewModel</text>
  <text x="225" y="150" class="text-component">• CreateProductViewModel</text>
  <text x="225" y="165" class="text-component">• ProductDetailViewModel</text>

  <!-- Navigation -->
  <rect x="370" y="90" width="130" height="80" class="layer-box" fill="#bbdefb"/>
  <text x="435" y="105" text-anchor="middle" class="text-title">Navigation</text>
  <text x="375" y="120" class="text-component">• BazaarNavigation</text>
  <text x="375" y="135" class="text-component">• Screen Routes</text>
  <text x="375" y="150" class="text-component">• Auth Guards</text>

  <!-- UI Components -->
  <rect x="520" y="90" width="130" height="80" class="layer-box" fill="#bbdefb"/>
  <text x="585" y="105" text-anchor="middle" class="text-title">UI Components</text>
  <text x="525" y="120" class="text-component">• ProductCard</text>
  <text x="525" y="135" class="text-component">• ProductGrid</text>
  <text x="525" y="150" class="text-component">• CommonComponents</text>

  <!-- Domain Layer -->
  <rect x="50" y="200" width="700" height="120" class="layer-box domain-layer"/>
  <text x="60" y="220" class="text-layer">Domain Layer (Business Logic)</text>

  <!-- Models -->
  <rect x="70" y="230" width="150" height="80" class="layer-box" fill="#e1bee7"/>
  <text x="145" y="245" text-anchor="middle" class="text-title">Domain Models</text>
  <text x="75" y="260" class="text-component">• User</text>
  <text x="75" y="275" class="text-component">• Product</text>
  <text x="75" y="290" class="text-component">• Result&lt;T&gt;</text>
  <text x="75" y="305" class="text-component">• UiState&lt;T&gt;</text>

  <!-- Repository Interfaces -->
  <rect x="240" y="230" width="150" height="80" class="layer-box" fill="#e1bee7"/>
  <text x="315" y="245" text-anchor="middle" class="text-title">Repository Interfaces</text>
  <text x="245" y="260" class="text-component">• AuthRepository</text>
  <text x="245" y="275" class="text-component">• ProductRepository</text>
  <text x="245" y="290" class="text-component">• Flow&lt;User?&gt;</text>
  <text x="245" y="305" class="text-component">• Flow&lt;List&lt;Product&gt;&gt;</text>

  <!-- Use Cases / Business Rules -->
  <rect x="410" y="230" width="150" height="80" class="layer-box" fill="#e1bee7"/>
  <text x="485" y="245" text-anchor="middle" class="text-title">Business Rules</text>
  <text x="415" y="260" class="text-component">• Validators</text>
  <text x="415" y="275" class="text-component">• Constants</text>
  <text x="415" y="290" class="text-component">• Auth State Management</text>
  <text x="415" y="305" class="text-component">• Product Operations</text>

  <!-- Data Layer -->
  <rect x="50" y="340" width="700" height="120" class="layer-box data-layer"/>
  <text x="60" y="360" class="text-layer">Data Layer (Infrastructure)</text>

  <!-- Firebase Implementations -->
  <rect x="70" y="370" width="180" height="80" class="layer-box" fill="#c8e6c9"/>
  <text x="160" y="385" text-anchor="middle" class="text-title">Repository Implementations</text>
  <text x="75" y="400" class="text-component">• FirebaseAuthRepositoryImpl</text>
  <text x="75" y="415" class="text-component">• FirestoreProductRepositoryImpl</text>
  <text x="75" y="430" class="text-component">• Error Handling</text>
  <text x="75" y="445" class="text-component">• Data Mapping</text>

  <!-- External Services -->
  <rect x="50" y="480" width="700" height="100" class="layer-box external-layer"/>
  <text x="60" y="500" class="text-layer">External Services</text>

  <!-- Firebase Services -->
  <rect x="70" y="510" width="150" height="60" class="layer-box" fill="#ffcc80"/>
  <text x="145" y="525" text-anchor="middle" class="text-title">Firebase Services</text>
  <text x="75" y="540" class="text-component">• Firebase Auth</text>
  <text x="75" y="555" class="text-component">• Cloud Firestore</text>
  <text x="75" y="565" class="text-component">• Firebase Storage</text>

  <!-- Android Framework -->
  <rect x="240" y="510" width="150" height="60" class="layer-box" fill="#ffcc80"/>
  <text x="315" y="525" text-anchor="middle" class="text-title">Android Framework</text>
  <text x="245" y="540" class="text-component">• Jetpack Compose</text>
  <text x="245" y="555" class="text-component">• Navigation Compose</text>
  <text x="245" y="565" class="text-component">• Lifecycle</text>

  <!-- Libraries -->
  <rect x="410" y="510" width="150" height="60" class="layer-box" fill="#ffcc80"/>
  <text x="485" y="525" text-anchor="middle" class="text-title">Libraries</text>
  <text x="415" y="540" class="text-component">• Koin (DI)</text>
  <text x="415" y="555" class="text-component">• Coil (Images)</text>
  <text x="415" y="565" class="text-component">• Coroutines</text>

  <!-- Dependency Injection -->
  <rect x="580" y="250" width="150" height="200" class="di-box"/>
  <text x="655" y="270" text-anchor="middle" class="text-title">Dependency Injection</text>
  <text x="655" y="285" text-anchor="middle" class="text-title">(Koin)</text>
  <text x="585" y="305" class="text-component">• AppModule</text>
  <text x="585" y="320" class="text-component">• Firebase Instances</text>
  <text x="585" y="335" class="text-component">• Repository Bindings</text>
  <text x="585" y="350" class="text-component">• ViewModel Factories</text>
  <text x="585" y="380" class="text-component">Provides:</text>
  <text x="585" y="395" class="text-component">• Singleton Services</text>
  <text x="585" y="410" class="text-component">• Repository Implementations</text>
  <text x="585" y="425" class="text-component">• ViewModel Instances</text>

  <!-- Arrows showing dependencies -->
  <!-- UI to Domain -->
  <line x1="285" y1="170" x2="315" y2="230" class="arrow"/>
  <line x1="435" y1="170" x2="485" y2="230" class="arrow"/>

  <!-- Domain to Data -->
  <line x1="315" y1="310" x2="160" y2="370" class="arrow"/>

  <!-- Data to External -->
  <line x1="160" y1="450" x2="145" y2="510" class="arrow"/>

  <!-- DI arrows -->
  <line x1="580" y1="320" x2="435" y2="130" class="arrow" stroke-dasharray="5,5"/>
  <line x1="580" y1="340" x2="315" y2="270" class="arrow" stroke-dasharray="5,5"/>
  <line x1="580" y1="360" x2="160" y2="410" class="arrow" stroke-dasharray="5,5"/>

  <!-- Legend -->
  <rect x="580" y="480" width="150" height="90" class="layer-box" fill="#f5f5f5"/>
  <text x="655" y="495" text-anchor="middle" class="text-title">Architecture Flow</text>
  <line x1="585" y1="505" x2="605" y2="505" class="arrow"/>
  <text x="610" y="510" class="text-component">Dependency</text>
  <line x1="585" y1="520" x2="605" y2="520" class="arrow" stroke-dasharray="5,5"/>
  <text x="610" y="525" class="text-component">Injection</text>
  <text x="585" y="545" class="text-component">• Unidirectional Flow</text>
  <text x="585" y="560" class="text-component">• Reactive State</text>
</svg>
